{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"amd_module.js","sourcesContent":["import \"ng-harmony-log\";\nimport { Logging, Mixin } from \"ng-harmony-decorator\";\nimport \"ng-harmony-util\";\n\n@Logging()\n@Mixin(TimeUtil, NumberUtil, AsyncUtil, TypeCheckUtil)\nexport class Harmony {\n\tconstructor (...args) {\n        this.constructor.$inject.forEach((injectee, i) => {\n\t\t\tthis[injectee] = args[i];\n\t\t});\n\t\tthis._constructed = this._timestamp;\n\t}\n\tget name () {\n\t\treturn `${this.constructor.name}::${this._constructed}::${this._random}`;\n\t}\n\tget _name () {\n\t\tlet _name = this.name.split(\"::\");\n\t\treturn {\n\t\t\tfn: _name[0],\n\t\t\tts: _name[1],\n\t\t\tid: _name[2]\n\t\t}\n\t}\n\n\tstatic get $inject () {\n\t\treturn this._$inject || [];\n\t}\n\tstatic set $inject (injectees) {\n\t\tlet _injectees = [];\n\t\tif (!Array.isArray(injectees)) {\n\t\t\tinjectees = [injectees];\n\t\t}\n\t\tfor (let [i, injecteeStr] of injectees.entries()) {\n\t\t\tlet truthy = true;\n\t\t\tfor (let [j, _injecteeStr] of this.$inject.entries()) {\n\t\t\t\tif (injecteeStr === _injecteeStr) {\n\t\t\t\t\ttruthy = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (truthy) {\n\t\t\t\tif(injecteeStr.charAt(0) !== \"-\") {\n\t\t\t\t\t_injectees.push(injecteeStr);\n\t\t\t\t} else {\n\t\t\t\t\tlet j = this.$inject.indexOf(injecteeStr.slice(1));\n\t\t\t\t\tif (!!~j) {\n\t\t\t\t\t\tthis._$inject.splice(j, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._$inject = this.$inject.concat(_injectees);\n\t}\n\tstatic set $register (descriptor) {\n\t\tObject.keys(descriptor).forEach((module, i) => {\n\t\t\tangular.module(module)[descriptor[module].type](descriptor[module].name, this);\n\t\t});\n\t}\n\ttoString () {\n\t\treturn this.name || super.toString().match(/function\\s*(.*?)\\(/)[1];\n\t}\n}\n\nexport class Controller extends Harmony {\n    static set $register(descriptor) {\n        Object.getOwnPropertyNames(descriptor).forEach((module) => {\n            angular.module(module).controller(descriptor[module].name, this);\n        });\n    }\n\tconstructor (...args) {\n\t\tsuper(...args);\n\t\tlet proto = this.constructor.prototype; Object.getOwnPropertyNames(this.constructor).forEach((fn, i) => {\n\t\t\tif (typeof proto[key] === \"function\" &&\n\t\t\t\tkey[0] === \"$\") {\n\t\t\t\tthis.$scope[key.slice(1)] = this.$scope[key] = (..._args) => {\n\t\t\t\t\treturn fn.apply(this, _args);\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n\t_digest () {\n\t\ttry { this.$scope.$digest(); }\n\t\tcatch (ngEx) {}\n\t}\n}\nController.$inject = \"$scope\";\n\nexport class Service extends Harmony {\n\tstatic set $register(descriptor) {\n\t\tObject.keys(descriptor).forEach((module) => {\n\t\t\tangular.module(module)[descriptor[module].type || \"service\"](descriptor[module].name, this);\n\t\t});\n\t}\n}"]}